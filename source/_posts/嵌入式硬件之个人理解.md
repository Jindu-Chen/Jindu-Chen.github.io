---
title: 嵌入式硬件--学习笔记
date: 2024-02-01
tags:
categories:
- [硬件]
- [MISC]
description: |
    &emsp;&emsp;写下此篇文章，系统性地总结个人对硬件开发的认知，以作回顾，本意不是为了深入硬件开发，因为每个细分领域的差异都是巨大的，而人的精力是有限的。<br>
    &emsp;&emsp;但是，作为一个嵌入式软件开发人员，应当要对硬件有所了解，适当地学习认识硬件，相信对嵌入式开发本业也能起到一定的反哺作用。
---


[**PCB设计前置知识学习笔记**](/2024/01/01/PCB设计前置知识笔记)
[**硬件基础器件知识记录**](/2024/01/01/硬件基础器件知识简述)

<br>

**未完待续...**


## 前言

分为PCB设计部分、电路原理图设计部分、IC选型部分

## 硬件开发概述

电路原理图设计（Schematic）

PCB布局（layout）

## 电路原理图设计

### 电流检测电路设计


###  DCDC电路

Boost升压电路原理

Buck

升降压、稳压电路设计

DCDC外围电路

### LDO电路

### 充电电路设计

充电时 充电极接到电池正极，同时电池正极又接到负载端，那么设备是用的电池的电还是充电线的电？

充电器件外围电路

充满电后，电池有继续参与到充放电循环中吗


### 其它电路设计

按键复位电路

基本的电路原理

RC一阶

#### 交流放大电路

采用三极管、电容等将交流信号放大，滤掉直流信号

## PCB Layout设计

### PCB走线设计

避免直角走线

因为当PCB直角走线时，在传输线拐角处的线宽变大，约为正常线宽的1.414 倍。由于线宽改变，导致阻抗变小，产生一定的信号反射。同时，90度拐角处还会产生寄生电容/寄生电感和尖端EMI

## PCB设计之基础术语解析

#### 过孔设计

Via孔
Pad孔：烧录孔，适合排针类

通孔、埋孔、盲孔
盲孔：并非如通孔一般贯穿整个电路板，通常用于空间紧密的布置，节省空间，留出更多空间用于摆放其它器件或者走线，但其工艺价格较通孔高


#### 测试点设计

### 电源规划

电源规划属于布局设计和布线设计：
电源分配网络: 电源分配网络是将电源从电源插座分配到各个元件的网络。电源分配网络的设计应考虑以下因素：

电源纹波和噪声: 电源纹波和噪声会影响电路的性能。电源分配网络应设计得尽可能减少电源纹波和噪声。
电流负载: 电源分配网络应能够承受所有元件的最大电流负载。
热量: 电源分配网络会产生热量。电源分配网络应设计得能够散发出足够的热量。
去耦: 去耦是指使用电容器将高频噪声从电源线中去除。去耦可以减少电源纹波和噪声，并提高电路的稳定性。

电源线宽度: 电源线应足够宽，以承载所需的电流。
电源线布局: 电源线应远离信号线，以减少电磁干扰 (EMI)。
接地: 接地是电源规划的重要组成部分。PCB 应具有专用接地层，连接到所有元件的接地引脚。接地层应在单点连接到电源接地。

线发烫是由于电源宽度不够

### 串扰抑制

### 阻抗匹配

理想的阻抗匹配状态是信号源的输出阻抗与负载阻抗相等，这时信号传输效率最高，几乎没有反射，能量损失最小。

如电池，输出阻抗主要是欧姆阻抗，反映电池内部的电阻特性。同一电池状态，不同供电电流下，电池电压不一样。可以说这个电压电流比值差，就是输出阻抗。

阻抗匹配不仅适用于高频信号传输（如微波电路中的传输线），也适用于低频电路，如音频放大器与扬声器之间的连接。


"反射"指的是当信号遇到阻抗不匹配的界面时，部分能量不能被负载吸收，而是被反射回信号源的现象
这种现象类似于光从一种介质进入另一种介质时发生的反射。在电信号传输中，如果信号源的输出阻抗（Source Impedance）与负载阻抗（Load Impedance）不相等，就会在它们的连接点产生阻抗失配，从而引发反射。

**如何匹配阻抗？**
终端匹配：在信号链路的末端添加一个与传输线阻抗相等的电阻，直接吸收反射信号。



### 环路阻抗

环路阻抗通常指的是在电路中形成闭合回路的阻抗特性，特别是在讨论反馈系统（如放大器的反馈网络）时。
它涉及到信号从输出到输入的整个路径上的总阻抗，包括所有元器件（如电阻、电容、电感）的贡献。
环路阻抗对系统的稳定性、增益以及频率响应有着直接影响。在反馈放大器设计中，环路增益的计算就需要考虑环路阻抗，以确保系统稳定工作，避免自激振荡。


### 电磁兼容性（EMC）

### 静电测试（ESD）


## 疑惑解答及扩展思考

### MOS管的栅极G和源极S为啥要串100k电阻？

在无驱动信号时，提供偏置，比如接地偏置等。

防止静电损伤：MOSFET的栅极非常敏感，容易受到静电放电（ESD）的影响。100kΩ的电阻可以限制流过栅极的瞬时电流，从而提供一定的静电保护

避免寄生振荡：在**高频率或高速开关**应用，MOSFET的栅极-漏极（Miller电容）可能会引起寄生振荡。100kΩ电阻有助于抑制这些振荡。

选择100K电阻会提供更慢的开关速度、更强的静电保护、更低的静态电流

- 另外，通常从芯片的驱动口到MOSFET（金属-氧化物半导体场效应晶体管）栅极之间串联一个1kΩ电阻（也称为栅极电阻或GATE电阻），其作用包括有：限流保护、防止毛刺等

### EMC测试fail，如何排查？

首先重点排查可能与软件相关的信号，超过1MHz的都要着重注意，走线过长的也要注意，如时钟线、数据线等信号线等，是否有串电阻以起到如下作用：
- 阻抗匹配：串联一个匹配电阻（其值接近传输线的特征阻抗）可以在信号源处或接收端实现阻抗匹配，减少反射
- 吸收反射信号：长信号线仍可能因线路特性变化（如接头、分支等）引起微小的反射。在信号线上串联一个小电阻（如终端电阻）可以吸收这些反射回来的微弱信号，减少它们与原信号叠加造成的干扰
- 降低信号上升沿速度：快速变化的信号边缘（即上升沿和下降沿）会产生较强的电磁辐射。串联电阻可以稍微降低信号的边沿速率，减少高频成分
- 噪声抑制：在信号线上串联电阻可以作为一个简单的低通滤波器，帮助抑制高频噪声，这些噪声往往是EMC问题的主要来源

<br>

排查与高频相关的器件，如开关电源、DCDC

布线设计、信号线与电源线的隔离、地平面的处理是否合理？


## 参考站点


- [【Allegro教程】零基础小白快速入门4层板PCB设计](https://www.bilibili.com/video/BV1d4411R74r/?spm_id_from=333.337.search-card.all.click&vd_source=82e85569f7427ac31cbd67ec7206aa00)
- [PCB为什么不能直角走线？三大理由！](https://mp.weixin.qq.com/s/YeJILgNylGv386t_LCj2zA)

