---
title: 嵌入式软件架构设计
date: 2023-12-04
updated: 2023-12-05
tags:
- [设计模式]
categories:
- [MCU]
- [RTOS]
description: 总结个人在嵌入式裸机开发、RTOS开发中所应用的软件架构设计
---


## 程序设计原则

- 层级之间的调用和信息上报
  - 下层提供直接接口调用，提供注册回调函数，禁止调用上层接口


- 设计模式的应用
    - 状态机
    - 命令模式
       事件与匹配函数执行的数组集


## 裸机开发

- 模块间通信
  - 实时性要求不高的情况下，可以应用 类消息队列 的方式，尽量使用避免跨文件的全局变量
  - 高实时性要求下，可以采用 订阅-发布模式

- 软件定时器的使用
  - 以Systick为全局时基


## RTOS开发

### 代码业务设计

- 消息队列的应用
  - 阻塞式消息队列

- 事件的应用


### 多线程设计注意点

- 临界区问题
- 高实时性要求场合
- 


